(this.webpackJsonpreact_deckgl=this.webpackJsonpreact_deckgl||[]).push([[0],{135:function(e,t,n){e.exports=n(147)},140:function(e,t,n){},143:function(e,t){},147:function(e,t,n){"use strict";n.r(t);var a=n(9),r=n.n(a),i=n(111),o=n.n(i),c=(n(140),n(75)),s=n.n(c),l=n(93),u=n(112),p=n(113),d=n(121),b=n(114),h=n(123),m=n(159),g=n(161),v=n(118),f={longitude:7.588491060909099,latitude:51.96910699949048,zoom:7.5,pitch:50,bearing:5},k=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(d.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).state={allTracksData:[],data:[],cords:[],pointerX:0,pointerY:0,hoveredObject:null,loading:!0,trackNo:0},n.getTracksMeasurement=function(){var e=Object(l.a)(s.a.mark((function e(t){var a,r,i,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=[],r=0,i=0,o=0;case 5:if(!(o<t.length)){e.next=17;break}return e.next=8,fetch("https://envirocar.org/api/stable/tracks/".concat(t[o].id));case 8:return r=e.sent,e.next=11,r.json();case 11:i=e.sent,a.push(i),n.setState({trackNo:o});case 14:o++,e.next=5;break;case 17:console.log(a),n.setState({allTracksData:a,loading:!1});case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.renderLayers=function(e){var t=[];return e.cords.forEach((function(e){t.push(new g.a({id:e.properties.id,data:e.features,getPosition:function(e){return e.geometry.coordinates},getColor:function(t){return e.properties.sensor.properties.engineDisplacement<1600?[250,162,0]:e.properties.sensor.properties.engineDisplacement<1800?[126,212,2]:[249,249,71]},getRadius:function(e){return 20},opacity:1,radiusMinPixels:1,radiusMaxPixels:4,pickable:!0,onHover:function(e){return n.setState({hoveredObject:e.object,pointerX:e.x,pointerY:e.y})}}))})),t},n}return Object(h.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=Object(l.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://envirocar.org/api/stable/tracks?bbox=7.0,51.1,7.3,52.0",e.next=3,fetch("https://envirocar.org/api/stable/tracks?bbox=7.0,51.1,7.3,52.0");case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,this.getTracksMeasurement(n.tracks);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_renderTooltip",value:function(){var e=this.state||{},t=e.hoveredObject,n=e.pointerX,a=e.pointerY;console.log(t);var i="";if(t){var o=t.properties.phenomenons;i="<div>\n      ".concat(o["Intake Temperature"]?"<b>Intake Temperature: </b> <i>"+o["Intake Temperature"].value+o["Intake Temperature"].unit+"</i><br>":"","\n      ").concat(o.Speed?"<b>Speed: </b><i>"+o.Speed.value+o.Speed.unit+"</i><br>":""," \n      ").concat(o["GPS Bearing"]?"<b>GPS Bearing: </b><i>"+o["GPS Bearing"].value+o["GPS Bearing"].unit+"</i> ,<br>":"","\n      ").concat(o.Rpm?"<b>Rpm: </b><i>"+o.Rpm.value+o.Rpm.unit+"</i><br>":"","\n      ").concat(o["Throttle Position"]?"<b>Throttle Position: </b><i>"+o["Throttle Position"].value+o["Throttle Position"].unit+"</i><br>":"","\n      ").concat(o.Consumption?"<b>Consumption: </b><i>"+o.Consumption.value+o.Consumption.unit+"</i><br>":"","\n      ").concat(o.CO2?"<b>CO2: </b><i>"+o.CO2.value+o.CO2.unit+"</i><br>":"","\n      ").concat(o["Calculated MAF"]?"<b>Calculated MAF: </b><i>"+o["Calculated MAF"].value+o["Calculated MAF"].unit+"</i><br>":"","\n      ").concat(o["GPS Altitude"]?"<b>GPS Altitude: </b><i>"+o["GPS Altitude"].value+o["GPS Altitude"].unit+"</i><br>":"","\n      ").concat(o["GPS Speed"]?"<b>GPS Speed: </b><i>"+o["GPS Speed"].value+o["GPS Speed"].unit+" </i><br>":"","\n      ").concat(o["Intake Pressure"]?"<b>Intake Pressure: </b><i>"+o["Intake Pressure"].value+o["Intake Pressure"].unit+"</i><br>":"","\n      ").concat(o["Engine Load"]?"<b>Engine Load: </b><i>"+o["Engine Load"].value+o["Engine Load"].unit+"</i><br>":"","\n      ").concat(o["GPS Accuracy"]?"<b>GPS Accuracy: </b><i>"+o["GPS Accuracy"].value+o["GPS Accuracy"].unit+"</i>":"","\n      </div>")}return t&&r.a.createElement("div",{style:{display:"flex",position:"fixed",borderRadius:"3px",padding:"5px",zIndex:1,fontFamily:"Ubuntu",textTransform:"uppercase",width:"360px",height:"auto",pointerEvents:"none",backgroundColor:"#F9F947",color:"#424242",left:n,top:a},dangerouslySetInnerHTML:{__html:i}})}},{key:"render",value:function(){return this.state.loading?r.a.createElement("div",{style:{margin:"200px 300px 0 300px",textAlign:"center"}},r.a.createElement("h1",null,r.a.createElement("i",null,"Fetching all tracks..")),r.a.createElement("p",null,r.a.createElement("i",null,this.state.trackNo+2," "),"track(s) Fetched"),r.a.createElement("p",null,"Data visualisation is done on following basis -"),r.a.createElement("p",null," All the tracks are being fetched initially. After this all track data is being fetched for each track. On hovering over the layers, attributes can be be seen in the flex box and tracks are being coloured on the basis of engineDisplacement")):r.a.createElement("div",null,r.a.createElement(m.a,{initialViewState:f,controller:!0,layers:this.renderLayers({cords:this.state.allTracksData})},r.a.createElement(v.a,{mapboxApiAccessToken:"pk.eyJ1IjoiYWxhbmtyaXQiLCJhIjoiY2s3ZG9pYm40MGI5MTNobnc5ams4Nm50dSJ9.QgPqHcdj2FeNtpeailF3Bg",mapStyle:"mapbox://styles/mapbox/dark-v10"}),this._renderTooltip()))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(k,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},96:function(e,t){}},[[135,1,2]]]);
//# sourceMappingURL=main.23a67edf.chunk.js.map